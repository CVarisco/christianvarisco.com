---
import type { Lang } from '../../i18n';
import { languages, getAlternatePath } from '../../i18n';

interface Props {
  currentLang: Lang;
  currentPath: string;
}

const { currentLang, currentPath } = Astro.props;
const alternatePaths = getAlternatePath(currentLang, currentPath);
---

<nav class="language-switcher" aria-label="Language selection">
  {Object.entries(languages).map(([code, name]) => (
    <a
      href={alternatePaths[code as Lang]}
      hreflang={code}
      class:list={[
        'lang-link',
        currentLang === code ? 'active' : ''
      ]}
      aria-current={currentLang === code ? 'page' : undefined}
    >
      {code.toUpperCase()}
    </a>
  ))}
</nav>

<style>
  .language-switcher {
    display: flex;
    align-items: center;
    gap: 4px;
  }

  .lang-link {
    padding: 4px 8px;
    font-size: var(--font-size-sm);
    font-weight: 500;
    border-radius: 4px;
    transition: all 0.2s ease;
    color: var(--color-text-secondary);
  }

  .lang-link:hover {
    color: var(--color-text-primary);
  }

  .lang-link.active {
    background-color: var(--color-accent);
    color: var(--color-text-alternate);
  }

  .lang-link.active:hover {
    color: var(--color-text-alternate);
  }
</style>
