---
interface Props {
  data: {
    headline: {
      before: string;
      highlight: string;
      after: string;
    };
    subheadline: string;
    cards: Array<{
      icon: string;
      title: string;
      description: string;
      solution: string;
    }>;
    cta: {
      label: string;
      href: string;
    };
  };
}

const { data } = Astro.props;
---

<section id="challenges" class="challenges-section" data-section="challenges">
  <div class="container">
    <!-- Header -->
    <div class="challenges-header">
      <h2 class="challenges-headline">
        {data.headline.before}<span class="text-accent">{data.headline.highlight}</span>{data.headline.after}
      </h2>
      <p class="challenges-subheadline">
        {data.subheadline}
      </p>
    </div>

    <!-- Cards Grid -->
    <div class="challenges-grid">
      {data.cards.map((card, index) => (
        <article class={`challenge-card scroll-reveal stagger-${index + 1}`}>
          <div class="challenge-icon">
            <img src={`/images/icons/${card.icon}.svg`} alt="" width="120" height="120" />
          </div>
          <h3 class="challenge-title">{card.title}</h3>
          <p class="challenge-description">{card.description}</p>
          <p class="challenge-solution">{card.solution}</p>
        </article>
      ))}
    </div>

    <!-- CTA -->
    <div class="challenges-cta">
      <a
        href={data.cta.href}
        class="cta-button"
        target="_blank"
        rel="noopener noreferrer"
      >
        {data.cta.label}
        <svg class="cta-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
        </svg>
      </a>
    </div>
  </div>
</section>

<style>
  .challenges-section {
    padding: var(--spacing-xl) 0;
    background-color: var(--color-background-primary);
  }

  @media (min-width: 768px) {
    .challenges-section {
      padding: var(--spacing-3xl) 0;
    }
  }

  .challenges-header {
    text-align: center;
    max-width: 800px;
    margin: 0 auto var(--spacing-xl);
  }

  @media (min-width: 768px) {
    .challenges-header {
      margin-bottom: var(--spacing-2xl);
    }
  }

  .challenges-headline {
    font-size: clamp(1.75rem, 5vw, 3rem);
    font-weight: 700;
    line-height: 1.15;
    margin-bottom: var(--spacing-sm);
  }

  .challenges-subheadline {
    font-size: var(--font-size-md);
    color: var(--color-text-secondary);
    line-height: 1.6;
  }

  @media (min-width: 768px) {
    .challenges-subheadline {
      font-size: var(--font-size-lg);
    }
  }

  .challenges-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-xl);
  }

  @media (min-width: 768px) {
    .challenges-grid {
      grid-template-columns: repeat(3, 1fr);
      gap: var(--spacing-md);
    }
  }

  @media (min-width: 768px) {
    .challenges-grid {
      margin-bottom: var(--spacing-2xl);
    }
  }

  .challenge-card {
    background-color: var(--color-background-secondary);
    border-radius: 0;
    padding: var(--spacing-md);
    border: 1px solid var(--Border-tertiary, #444444);
    transition: transform 0.2s ease, border-color 0.2s ease;
  }

  .challenge-card:hover {
    transform: translateY(-4px);
    border-color: var(--color-accent);
  }

  @media (min-width: 768px) {
    .challenge-card {
      padding: var(--spacing-md) var(--spacing-sm);
    }
  }

  /* Scroll entrance animation - handled by .scroll-reveal class in global.css */

  .challenge-icon {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    margin-bottom: var(--spacing-sm);
  }

  .challenge-icon img {
    width: 100%;
    height: auto;
  }

  .challenge-title {
    font-size: var(--font-size-lg);
    font-weight: 700;
    line-height: 1.3;
    margin-bottom: var(--spacing-xs);
    color: var(--color-text-primary);
  }

  @media (min-width: 768px) {
    .challenge-title {
      font-size: var(--font-size-xl);
    }
  }

  .challenge-description {
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
    line-height: 1.6;
    margin-bottom: var(--spacing-sm);
  }

  @media (min-width: 768px) {
    .challenge-description {
      font-size: var(--font-size-base);
    }
  }

  .challenge-solution {
    font-size: var(--font-size-sm);
    font-weight: 600;
    color: var(--color-text-primary);
    line-height: 1.5;
  }

  @media (min-width: 768px) {
    .challenge-solution {
      font-size: var(--font-size-base);
    }
  }

  .challenges-cta {
    display: flex;
    justify-content: center;
  }

  .cta-button {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.875rem 1.75rem;
    font-size: var(--font-size-base);
    font-weight: 600;
    color: var(--color-text-alternate);
    background-color: var(--color-accent);
    border-radius: var(--radius-full);
    transition: all 0.2s ease;
  }

  .cta-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(203, 252, 1, 0.3);
    color: var(--color-text-alternate);
  }

  .cta-arrow {
    width: 20px;
    height: 20px;
    transition: transform 0.2s ease;
  }

  .cta-button:hover .cta-arrow {
    transform: translateX(4px);
  }
</style>
